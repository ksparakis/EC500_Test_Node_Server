var express = require('express');
var app = express();

//Displays whatever is in directory "public" at /.
app.use('/', express.static('public'));


var bodyParser = require('body-parser')
app.use( bodyParser.json() );       // to support JSON-encoded bodies
app.use(bodyParser.urlencoded({     // to support URL-encoded bodies
  extended: true
})); 



// This responds a POST request for the homepage
app.post('/login', function (req, res) {
   
   console.log("Got a POST request for the login");
   var username  = req.body.username
   var password  = req.body.password
	console.log("Username ="+username+" Password="+password);
   if (username == "John" && password == "123456")
   {
	response = {
		message:'login was successfully',
		token:'asdbug8w4q34fba9fhw93f4fs'
        };
	res.send(JSON.stringify( response ));
        console.log("Login for john success");
   }
   else
   {
	response = { message:'login failed. Try again' };
	res.status(404).send(JSON.stringify(response));
	console.log("login failed");
   }	   
})

var server = app.listen(8081, function () {

  var host = server.address().address
  var port = server.address().port

  console.log("Example app listening at http://%s:%s", host, port)
})
